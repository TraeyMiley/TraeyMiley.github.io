!function(){function e(e){var t=q;q=[];for(var n=0,i=t.length;n<i;n++){var r=t[n];if(r)try{r(e)}catch(o){}}}function t(){}function n(e,t){var n="string"==typeof e&&e.indexOf(".")>0,i="string"==typeof t&&t.indexOf(".")>0;if(n&&i){var r=e.split("."),o=t.split(".");if(4===r.length&&4===o.length){for(var a=0;a<4;a++){var c=+r[a],f=+o[a];if(c>f)return 1;if(c<f)return-1}return 0}}else{var u=+e,v=+t;if(u>0&&v>0)return u>v?1:u==v?0:-1}}function i(e){var t;return"v.qq.com"==e?t="vplay":/qq.com$/.test(e)&&(t=e),t}function r(){var e;try{e=i(window.top.location.host)}catch(t){}return"string"!=typeof e&&(e="outer"),"web."+e}function o(e,t){var i,o,a=$.Deferred(),f=s(),u=f&&f.version;return"string"==typeof u&&u!=w?(i=n(u,"9.16.1658.0"),o=n(u,50160931),i>=0||o>=0?(Q=u,c("qqlive://pullservice/atag="+(e||r()),function(e){e?a.resolve():a.reject(-1)})):a.reject(-3)):a.reject(-2),a}function a(e,t,n,i){function r(){n?o():v(e,function(e){e?a.resolve():o()})}function o(){i?a.reject():l(e,function(e){e?a.resolve():a.reject()})}var a=$.Deferred();return t?r():c(e,function(e){e?a.resolve():r()}),a}function c(e,t){"undefined"!=typeof txv.ua.ie?f(e,t):u(e,t)}function f(e,i){var r=n(Q,"9.16.1647.0"),o=n(Q,50160930);i=i||t,r>=0||o>=0?function(){try{new ActiveXObject("QQLive.Application").OpenQQLive(e),i(!0)}catch(t){i(!1)}}():i(!1)}function u(e,n){if(n=n||t,0==$("#NPQQLive").length){$("body").append('<embed id="NPQQLive" name="NPQQLive" width="1" height="1" type="application/tecent-qqlive-plugin" hidden="true" invokeurls="false"/>')}var i=document.getElementById("NPQQLive");if(i&&i.OpenSSO)try{i.OpenSSO(e),n(!0)}catch(r){n(!1)}else n(!1)}function v(e,i){if(i=i||t,"http:"===location.protocol){var r=!1;try{var o;o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o.onreadystatechange=function(){4==o.readyState&&(200==o.status?i(!0):r||(r=!0,i(!1)))},o.open("POST","http://127.0.0.1:11066/startclient",!0),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.send(e)}catch(u){r||(r=!0,i(!1))}}else{var a=n(Q,"9.18.1863.0"),c=n(Q,50161131);if(a>=0||c>=0){var f=new Image;f.onload=function(){var e=(f.width,f.height);i(1==e&&1==e)},f.onerror=function(){i()},f.src="http://127.0.0.1:11066/pullclientjpg?cmd="+encodeURIComponent(e)+"&hash="+Math.floor(1e6*Math.random())}else i(!1)}}function l(e,t){var n=$(window),i=!0,r=txv.ua.chrome>0,o=!0,a=function(e){i&&(i=!1,t&&t(e))},c=function(){r&&(o=!0)};r&&(o=!1),n.bind("blur",c);var f=$('<iframe src="'+e+'">');f.hide(),$("body").append(f),setTimeout(function(){if(n.unbind("blur",c),f.remove(),a(o),!o){var e=new Date;e.setTime(e.getTime()-1),document.cookie=b+"=0; path=/; expires="+e.toGMTString()}},1e3)}function s(){return"undefined"!=typeof txv.ua.ie?p():d()}function p(){try{return{platform:"ie",version:new ActiveXObject("QQLiveInstaller.InstallHelper.1").GetVersionByClsid("D9EBCF5D-3F8F-4B6A-89BA-70577BE73C62")}}catch(e){return{platform:"ie",version:w}}}function d(){for(var e=null,t=0;t<navigator.plugins.length;t++)if("QQLive"==navigator.plugins[t].name||"腾讯视频"==navigator.plugins[t].name||"npQQLive.dll"==navigator.plugins[t].filename){e=navigator.plugins[t];break}var n=w;if(e)if("undefined"!=typeof e.version)n=e.version;else{var i;if(i=e.description.match(/version:((\d+\.){3}(\d+)?)/)){n=i[1]||"";for(var r=n.split(".")||[],t=0,o=r.length;t<o;t++){var a=parseInt(r[t]);r[t]=""+a}r.length>1&&(n=r.join("."))}}return{platform:"webkit",version:n}}function h(e){if(e){txv.cookie.del(b);var t=new Date;t.setTime(t.getTime()+31536e6),document.cookie=b+"="+e+"; path=/; expires="+t.toGMTString()+";"}}function g(){x=!0;for(var e=0,t=j.length;e<t;e++){var n=j[e];if(n)try{y(n)}catch(i){}}}function m(e){x?y(e):j.push(e)}function y(n){if(n)if("https:"===location.protocol){var i=new Image,r=!1,o=function(e){r||(r=!0,n(e))};i.onload=function(){var e=i.width,t=i.height;if(e>0&&t>0){var n=100*(e-1)+(t-1)+50160820;o({version:n}),h(n)}},i.onerror=function(){o()},i.src="http://127.0.0.1:11066/getversionjpg?hash="+Math.floor(1e6*Math.random()),setTimeout(function(){o()},1e3)}else if(q.push(n),!T){var a=document.createElement("script"),c=function(){T&&(T=!1,window.qqliveclientinfo=t,$(a).remove())},f=function(){T&&e(),c()};T=!0,a.src="http://127.0.0.1:11066/getinfo?hash="+Math.random(),window.qqliveclientinfo=function(t){e({version:t.ver}),h(t._ver),c()},a.onerror=function(){f()},setTimeout(function(){f()},2e3),document.body.appendChild(a)}}if(!txv.client){var w="0.0.0.0",Q=w,b="QQLivePCVer",q=[],T=!1,j=[],x=!1;"complete"!=document.readyState?$(window).load(g):setTimeout(g,1e3);var L=function(e,t,n){var i=$.Deferred();if(Q=w,!e){var r=s()||{},o=r.version;if("string"==typeof o&&o!==w){if((Number(o.replace(/\./gi,""))||0)>0)return Q=o,i.resolve(o),i}}var a=function(){if(n)Q=w,i.reject();else{var e=+txv.cookie.get(b);e>0?(Q=e,i.resolve(e)):(Q=w,i.reject())}};return t?a():m(function(e){e&&e.version?(Q=e.version,i.resolve(e.version)):a()}),i},M={exist:L,pull:o,open:a};txv.client=M}}();